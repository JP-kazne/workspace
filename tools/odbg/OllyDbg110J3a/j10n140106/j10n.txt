j10n(japanization) 1.40.106 -- Plugin for OllyDbg  2004/11/01

機能
  1.参照文字列の検索（Search for -> All referenced text strings）で日本語文字列を参照可能にする。
  2.ダイアログボックス中のエディットボックスのフォントを指定のフォントに変更する。
  3.メインウィンドウのフォントを指定のフォントに変更する（ステータスバーに日本語表示可能になる）。

インストール
  xj10n.dllをOllyDbgのインストールしてあるフォルダに入れるだけ。
  （メニューの下の方に行くように、ファイル名は xj10n.dll にしてある）

やってること
  機能1:
    _IstextA関数が文字かどうかの判断をしているテーブルを書き換えて、SJISも文字として判断するようにしている。
    （めるさん作のローダーの機能をプラグインでやるようにしたもの）

  機能2:
    フックプロシージャでWM_INITDIALOGが処理された直後を捕らえて、そのウィンドウ（ダイアログ）に貼り付いている
    Editクラスのウィンドウ、即ちエディットボックスに WM_SETFONT を送りつけている。
    Search for -> Binary string で出るダイアログのボックスは、エディットボックスが独自のクラスで、WM_SETFONTメッセージを
    処理していない為、フォントをセット出来ない。
    フォント選択ダイアログにはWM_SETFONTが届かないように、親ウィンドウ無し(NULL)にしているので、裏側に隠れてしまいます。

  機能3:
    一つめのCreateFontAを呼んでいる所を探して、その戻り値（＝フォントのハンドル）を格納しているアドレスに、j10nで作成した
    フォントのハンドルを書き込んでいる。（takuさん作のjfontプラグインに、パターンサーチによるアドレス取得を加えたもの）


更新履歴
v1.40.106
参照文字列検索に関係する IstextA の呼び出しの時だけ、文字判断テーブルにパッチを当てるようにした。
この修正で、分析(Analysis)でのご判断が回避できたはず。
この機能の on/off は廃止した。
また、OllyDbg v1.06以降に対応するように、PDKバージョン 1.06でコンパイルしたので、バージョン番号末尾が後退。

v1.32.108
日本語化パッチが当っている場合にエラー落ちするのを修正（フォントを変更しないようにした）。
つか、パターンサーチ失敗した場合の処理を忘れてた。
ついでに、機能の on/off をできるようにした。

v1.30.108
メインウィンドウのフォントも変えられるようにした（エディットボックスのフォントと同じもの）。
これでステータスバーに“あの”フォントが使える！

v1.20.108
なんでもかんでもWM_SETFONT送ってダイアログをメチャメチャにしていたのを修正。
Editクラスのみに送るようにした。
相変わらず、Search for -> Binary string はダメ。日本語表示する必要ないので諦める。
メインメニューをいじることはあまり無さそうなので、ファイル名を xj10n.dll として配布。
（Pluginメニューの下のほうに表示されるように）

v1.11
思いっきりミスってたょ。

v1.10
文字切れを解消するようにした。
かなり強引なやり方なので、別に切れててもいいやという人は、前のバージョンを使ってください。
強引なやり方とは
　ダイアログの子ウィンドウの内、スタティックとチェックボックス、ラジオボタンについて
　指定のフォントオブジェクトを選択し、GetTextExtentPoint32で文字列の幅を調べ、
　ウィンドウ（コントロール）幅より長かったら、ウィンドウを伸ばしてます。

v1.01
フックプロシージャをアンフックするのを忘れていたのを修正

v1.00
JPRef改め
ダイアログフォント変更機能を付けた
パッチ当て部分のテーブルデータを外部ファイルから埋め込みにした

Thanks to（勝手に使ってます）
めるやっこせんせぃ
takuせんせぃ
